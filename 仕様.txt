目的はいまのところ

アイテムXを得る
Xを倒す
Xの目的を叶える

の3通り

Xの目的を叶える、の場合
Xの目的が何だと思っているのか、というのが問題になる。それをデータ的にどう管理するのが良いか

アイテムXを得る、だと、Xを得るために何をすればいいのか、というのが問題になる

なんらかのキャラの秘密や場所の秘密を明らかにし、何をすればいいのか、というのが更新される。

アイテムX自体にトポロジーが設定されていて、それがrevealedになる、というのが基本形だろう
revealedになっているかどうかのフラグはキャラごとにある
これをどのようなデータ形式で持つか。

Docchi的に自然なのは、全イベントテーブルというのがズラっと並んでおり、キャラごとにイベントのIDだけもっているMListを用意して、
revealedになるたびにそのIDを持ったオブジェクトを加えていく、というものだ。

トポロジーに関しても、Aがrevealedになる(or activatedになる)場合、flagはXに変わる、というものになるだろう

Aがrevealedされた場合、ルートXを進めていった先にあるものが実はXではないことに気づく、という展開になってくる。
情報格差が生じる。

Aにたどり着くために、バトルをする、情報戦を行う、場所に行って特定の行動をする、といった行動をとっていく
キャラによっては情報戦では情報が得られず、特定の条件を満たすことが必要な場合も出てくる

ああ難しい

だから結局、それぞれのまとまりごとに、書いてから Docchi Src に変換することになると思う
変換機能をDocchi側に用意するかは謎

で、イベントAを含むイベント集を逆引きで見れるツールも開発すると思う
なんかすげえ大変じゃねえか

まあシノビガミ的なシステムをシミュレートするのが大変なのは最初からわかってはいたけれども・・・